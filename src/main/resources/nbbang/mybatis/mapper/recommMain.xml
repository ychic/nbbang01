<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="nbbang.mybatis.mapper.recommMain">
	<select id="getUserSubService" resultType="String">
		SELECT subservice FROM subscription
	</select>
	<select id="getReview" resultType="recomm">
		SELECT ussr.USSRNO, ussr.USSRTITLE, ussr.USSRCONTENT, ussr.USSRPOSTDATE, 
		ussr.USSRORIGINFILENAMES, ussr.USSRREALFILENAMES, ussr.USSRCATEGORYNAME, 
		ussr.EMAIL, (SELECT COUNT(*) FROM ussrlike l WHERE l.ussrno=ussr.ussrno) count_ 
		FROM (SELECT b.*, ROWNUM R FROM (SELECT * FROM ussrbbs WHERE ussrpostdate > SYSDATE - 1) b) ussr 
		WHERE R BETWEEN 1 AND 10 ORDER BY count_ DESC
	</select>
</mapper>